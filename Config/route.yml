# BackBee resources
bb.classcontent_thumbnail:
    path: /%bbapp.routing.resource_uri_prefix%/%classcontent_thumbnail.base_folder%/{filename}
    defaults:
        _action: getClassContentThumbnailAction
        _controller: resource.controller
    requirements:
        filename: .+

bb.resources:
    path: /%bbapp.routing.resource_uri_prefix%/{filename}
    defaults:
        _action: resourcesAction
        _controller: resource.controller
    requirements:
        filename: .+

# BackBee media files
bb.images:
    path: /{type}/{filename}
    defaults:
        _action: mediaAction
        _controller: media.controller
    requirements:
        type: (%bbapp.routing.image_uri_prefix%|%bbapp.routing.media_uri_prefix%)
        filename: .+

# BackBee REST API

# Resource Rest API
bb.rest.resource.upload:
    path: /rest/{version}/resource/upload
    methods: [POST]
    defaults:
        _action: uploadAction
        _controller: BackBee\Rest\Controller\ResourceController
    requirements:
        version: \d+

# User Rest API
bb.rest.user.current:
    path: /rest/{version}/user/current
    methods: [GET]
    defaults:
        _action: getCurrentAction
        _controller: BackBee\Rest\Controller\UserController
    requirements:
        version: \d+

bb.rest.user.get:
    path: /rest/{version}/user/{id}
    methods: [GET]
    defaults:
        _action: getAction
        _controller: BackBee\Rest\Controller\UserController
    requirements:
        version: \d+
        id: \d+

bb.rest.user.post:
    path: /rest/{version}/user
    methods: [POST]
    defaults:
        _action: postAction
        _controller: BackBee\Rest\Controller\UserController
    requirements:
        version: \d+

bb.rest.user.put:
    path: /rest/{version}/user/{id}
    methods: [PUT]
    defaults:
        _action: putAction
        _controller: BackBee\Rest\Controller\UserController
    requirements:
        version: \d+
        id: \d+

bb.rest.user.patch:
    path: /rest/{version}/user/{id}
    methods: [PATCH]
    defaults:
        _action: patchAction
        _controller: BackBee\Rest\Controller\UserController
    requirements:
        version: \d+
        id: \d+

bb.rest.user.delete:
    path: /rest/{version}/user/{id}
    methods: [DELETE]
    defaults:
        _action: deleteAction
        _controller: BackBee\Rest\Controller\UserController
    requirements:
        version: \d+
        id: \d+

bb.rest.user.get_collection:
    path: /rest/{version}/user
    methods: [GET]
    defaults:
        _action: getCollectionAction
        _controller: BackBee\Rest\Controller\UserController
    requirements:
        version: \d+

# Group Rest Api
bb.rest.group.get:
    path: /rest/{version}/group/{id}
    methods: [GET]
    defaults:
        _action:     getAction
        _controller: BackBee\Rest\Controller\GroupController
    requirements:
        version: \d+
        id: \d+

bb.rest.group.delete:
    path: /rest/{version}/group/{id}
    methods: [DELETE]
    defaults:
        _action:     deleteAction
        _controller: BackBee\Rest\Controller\GroupController
    requirements:
        version: \d+
        id: \d+

bb.rest.group.post:
    path: /rest/{version}/group
    methods: [POST]
    defaults:
        _action:     postAction
        _controller: BackBee\Rest\Controller\GroupController
    requirements:
        version: \d+

bb.rest.group.put:
    path: /rest/{version}/group/{id}
    methods: [PUT]
    defaults:
        _action:     putAction
        _controller: BackBee\Rest\Controller\GroupController
    requirements:
        id: \d+
        version: \d+

bb.rest.group.get_collection:
    path: /rest/{version}/group
    methods: [GET]
    defaults:
        _action:     getCollectionAction
        _controller: BackBee\Rest\Controller\GroupController
    requirements:
        version: \d+

# Security Rest Api
bb.rest.security_firewall_autenticate:
    path: /rest/{version}/security/auth/{firewall}
    methods: [POST]
    defaults:
        _action: firewallAuthenticateAction
        _controller: BackBee\Rest\Controller\SecurityController
    requirements:
        version: \d+
        firewall: "[a-z_-]+"

bb.rest.security.authenticate:
    path: /rest/{version}/security/authentication
    methods: [POST]
    defaults:
        _action: authenticateAction
        _controller: BackBee\Rest\Controller\SecurityController
    requirements:
        version: \d+

bb.rest.security_firewall_status:
    path: /rest/{version}/security/auth/{firewall}
    methods: [GET]
    defaults:
        _action: firewallStatusAction
        _controller: BackBee\Rest\Controller\SecurityController
    requirements:
        version: \d+
        firewall: "[a-z_-]+"

bb.rest.security_session_delete:
    path: /rest/{version}/security/session
    methods: [DELETE]
    defaults:
        _action: deleteSessionAction
        _controller: BackBee\Rest\Controller\SecurityController
    requirements:
        version: \d+

bb.rest.acl.permissions:
    path: /rest/{version}/acl/permissions
    methods: [GET]
    defaults:
        _action: getMaskCollectionAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+

bb.rest.acl.permissions_map:
    path: /rest/{version}/acl
    methods: [POST]
    defaults:
        _action: postPermissionMapAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+

bb.rest.acl.ace_class_delete:
    path: /rest/{version}/acl/ace/class/{sid}
    methods: [DELETE]
    defaults:
        _action: deleteClassAceAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+

bb.rest.acl.ace_object_delete:
    path: /rest/{version}/acl/ace/object/{sid}
    methods: [DELETE]
    defaults:
        _action: deleteObjectAceAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+
        sid: .+

bb.rest.acl.get_classes:
    path: /rest/{version}/acl/class
    methods: [GET]
    defaults:
        _action: getClassCollectionAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+

bb.rest.acl.page.post:
    path: /rest/{version}/acl/{group}/page/{uid}
    methods: [POST]
    defaults:
        _action:     postPermissionsPageAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+
        group: \d+
        uid: \w{32}

bb.rest.acl.clear_permissions_classes:
    path: /rest/{version}/acl/{group}/clear/classes
    methods: [POST]
    defaults:
        _action: clearPermissionsClassesAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+
        group: \d+

bb.rest.acl.clear_permissions_objects:
    path: /rest/{version}/acl/{group}/clear/objects
    methods: [POST]
    defaults:
        _action: clearPermissionsObjectsAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+
        group: \d+

bb.rest.acl.clear_permissions_page:
    path: /rest/{version}/acl/{group}/page/clear/{uid}
    methods: [DELETE]
    defaults:
        _action: clearPermissionsPageAction
        _controller: BackBee\Rest\Controller\AclController
    requirements:
        version: \d+
        group: \d+
        uid: \w{32}

bb.rest.page.get_available_status:
    path: /rest/{version}/page/status
    methods: [GET]
    defaults:
        _action:     getAvailableStatusAction
        _controller: BackBee\Rest\Controller\PageController

bb.rest.page.get_metadata:
    path: /rest/{version}/page/{uid}/metadata
    methods: [GET]
    defaults:
        _action:     getMetadataAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        uid: \w{32}

bb.rest.page.get_ancestors:
  path: /rest/{version}/page/{uid}/ancestors
  methods: [GET]
  defaults:
    _action: getAncestorsAction
    _controller: BackBee\Rest\Controller\PageController
  requirements:
    uid: \w{32}

bb.rest.page.put_metadata:
    path: /rest/{version}/page/{uid}/metadata
    methods: [PUT]
    defaults:
        _action:     putMetadataAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+
        uid: \w{32}

bb.rest.page.get_collection:
    path: /rest/{version}/page
    methods: [GET]
    defaults:
        _action:     getCollectionAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+

bb.rest.page.get:
    path: /rest/{version}/page/{uid}
    methods: [GET]
    defaults:
        _action:     getAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+
        uid: \w{32}

bb.rest.page.post:
    path: /rest/{version}/page
    methods: [POST]
    defaults:
        _action:     postAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+

bb.rest.page.clone:
    path: /rest/{version}/page/{uid}/clone
    methods: [POST]
    defaults:
        _action:     cloneAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+

bb.rest.page.put:
    path: /rest/{version}/page/{uid}
    methods: [PUT]
    defaults:
        _action:     putAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+
        uid: \w{32}

bb.rest.page.patch:
    path: /rest/{version}/page/{uid}
    methods: [PATCH]
    defaults:
        _action:     patchAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+
        uid: \w{32}

bb.rest.page.put_collection:
    path: /rest/{version}/page
    methods: [PUT]
    defaults:
        _action:     putCollectionAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+

bb.rest.page.delete:
    path: /rest/{version}/page/{uid}
    methods: [DELETE]
    defaults:
        _action: deleteAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+
        uid: \w{32}

bb.rest.page.get_permissions:
    path: /rest/{version}/page/{group}/permissions/{uid}
    methods: [GET]
    defaults:
        _action: getPermissionsAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+
        uid: \w{32}
        group: \d+

bb.rest.page.delete_collection:
    path: /rest/{version}/page
    methods: [DELETE]
    defaults:
        _action:     deleteCollectionAction
        _controller: BackBee\Rest\Controller\PageController
    requirements:
        version: \d+

bb.rest.layout.get_workflow_state:
    path: /rest/{version}/layout/{uid}/workflow_state
    methods: [GET]
    defaults:
        _action: getWorkflowStateAction
        _controller: BackBee\Rest\Controller\LayoutController
    requirements:
        version: \d+

bb.rest.layout.get_collection:
    path: /rest/{version}/layout
    methods: [GET]
    defaults:
        _action: getCollectionAction
        _controller: BackBee\Rest\Controller\LayoutController
    requirements:
        version: \d+

bb.rest.layout.get:
    path: /rest/{version}/layout/{uid}
    methods: [GET]
    defaults:
        _action: getAction
        _controller: BackBee\Rest\Controller\LayoutController
    requirements:
        version: \d+

# bb.rest.layout.post:
#     path: /rest/{version}/layout
#     methods: [POST]
#     defaults:
#         _action: postAction
#         _controller: BackBee\Rest\Controller\LayoutController
#     requirements:
#         uid: \w{32}

bb.rest.layout.put:
    path: /rest/{version}/layout/{uid}
    methods: [PUT]
    defaults:
        _action: putAction
        _controller: BackBee\Rest\Controller\LayoutController
    requirements:
        version: \d+

bb.rest.layout.delete:
    path: /rest/{version}/layout/{uid}
    methods: [DELETE]
    defaults:
        _action: deleteAction
        _controller: BackBee\Rest\Controller\LayoutController
    requirements:
        version: \d+

bb.rest.layout.get_permissions:
    path: /rest/{version}/layout/{group}/permissions
    methods: [GET]
    defaults:
        _action: getPermissionsAction
        _controller: BackBee\Rest\Controller\LayoutController
    requirements:
        version: \d+
        group: \d+

bb.rest.layout.get_permissions:
    path: /rest/{version}/layout/{group}/permissions
    methods: [GET]
    defaults:
        _action: getPermissionsAction
        _controller: BackBee\Rest\Controller\LayoutController
    requirements:
        version: \d+
        group: \d+

bb.rest.site.get_collection:
    path: /rest/{version}/site
    methods: [GET]
    defaults:
        _action: getCollectionAction
        _controller: BackBee\Rest\Controller\SiteController
    requirements:
        version: \d+

bb.rest.classcontent.category.get:
    path: /rest/{version}/classcontent-category/{id}
    methods: [GET]
    defaults:
        _action: getCategoryAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+

bb.rest.classcontent.category.get_collection:
    path: /rest/{version}/classcontent-category
    methods: [GET]
    defaults:
        _action: getCategoryCollectionAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+

bb.rest.classcontent.get:
    path: /rest/{version}/classcontent/{type}/{uid}
    methods: [GET]
    defaults:
        _action: getAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        uid: "[a-f0-9]{32}"
        type: .+

bb.rest.classcontent.get_collection_by_type:
    path: /rest/{version}/classcontent/{type}
    methods: [GET]
    defaults:
        _action: getCollectionByTypeAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        type: "[a-zA-Z_\/]+"

bb.rest.classcontent.get_collection:
    path: /rest/{version}/classcontent
    methods: [GET]
    defaults:
        _action: getCollectionAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+

bb.rest.classcontent.put_collection:
    path: /rest/{version}/classcontent
    methods: [PUT]
    defaults:
        _action: putCollectionAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        uid: \w{32}

bb.rest.classcontent.post:
    path: /rest/{version}/classcontent/{type}
    methods: [POST]
    defaults:
        _action: postAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        uid: \w{32}
        type: .+

bb.rest.classcontent.put:
    path: /rest/{version}/classcontent/{type}/{uid}
    methods: [PUT]
    defaults:
        _action: putAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        uid: \w{32}
        type: "[a-zA-Z_\/]+"

bb.rest.classcontent.delete:
    path: /rest/{version}/classcontent/{type}/{uid}
    methods: [DELETE]
    defaults:
        _action: deleteAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        uid: \w{32}
        type: .+

bb.rest.classcontent.get_draft:
    path: /rest/{version}/classcontent-draft/{type}/{uid}
    methods: [GET]
    defaults:
        _action: getDraftAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        uid: \w{32}
        type: "[a-zA-Z_\/]+"

bb.rest.classcontent.get_draft_collection:
    path: /rest/{version}/classcontent-draft
    methods: [GET]
    defaults:
        _action: getDraftCollectionAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+

bb.rest.classcontent.put_draft:
    path: /rest/{version}/classcontent-draft/{type}/{uid}
    methods: [PUT]
    defaults:
        _action: putDraftAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        uid: \w{32}
        type: "[a-zA-Z_\/]+"

bb.rest.classcontent.patch_draft:
    path: /rest/{version}/classcontent-draft/{type}/{uid}
    methods: [PATCH]
    defaults:
        _action: patchDraftAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        uid: \w{32}
        type: "[a-zA-Z_\/]+"

bb.rest.classcontent.put_draft_collection:
    path: /rest/{version}/classcontent-draft
    methods: [PUT]
    defaults:
        _action: putDraftCollectionAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+

bb.rest.classcontent.get_permissions:
    path: /rest/{version}/classcontent/{group}/permissions
    methods: [GET]
    defaults:
        _action: getPermissionsAction
        _controller: BackBee\Rest\Controller\ClassContentController
    requirements:
        version: \d+
        group: \d+

bb.rest.bundle.get_collection:
    path: /rest/{version}/bundle
    methods: [GET]
    defaults:
        _action: getCollectionAction
        _controller: BackBee\Rest\Controller\BundleController
    requirements:
        version: \d+

bb.rest.bundle.get:
    path: /rest/{version}/bundle/{id}
    methods: [GET]
    defaults:
        _action: getAction
        _controller: BackBee\Rest\Controller\BundleController
    requirements:
        version: \d+

bb.rest.bundle.patch:
    path: /rest/{version}/bundle/{id}
    methods: [PATCH]
    defaults:
        _action: patchAction
        _controller: BackBee\Rest\Controller\BundleController
    requirements:
        version: \d+

bb.rest.bundle.exposed_actions:
    path: /rest/{version}/bundle/{bundleName}/{controllerName}/{actionName}{parameters}
    defaults:
        _action: accessBundleExposedRoutesAction
        _controller: BackBee\Rest\Controller\BundleController
    requirements:
        version: \d+
        bundleName: "[a-zA-Z]+"
        controllerName: "[a-zA-Z]+"
        actionName: "[a-zA-Z]+"
        parameters: "^\/.+|"

bb.rest.bundle.get_permissions:
    path: /rest/{version}/bundle/{group}/permissions
    methods: [GET]
    defaults:
        _action: getPermissionsAction
        _controller: BackBee\Rest\Controller\BundleController
    requirements:
        version: \d+
        group: \d+

bb.rest.media_folder.get_collection:
    path: /rest/{version}/media-folder
    methods: [GET]
    defaults:
        _action: getCollectionAction
        _controller: BackBee\Rest\Controller\MediaFolderController
    requirements:
        version: \d+

bb.rest.media_folder.get:
    path: /rest/{version}/media-folder/{uid}
    methods: [GET]
    defaults:
        _action: getAction
        _controller: BackBee\Rest\Controller\MediaFolderController
    requirements:
        version: \d+

bb.rest.media_folder.patch:
    path: /rest/{version}/media-folder/{uid}
    methods: [PATCH]
    defaults:
        _action: patchAction
        _controller: BackBee\Rest\Controller\MediaFolderController
    requirements:
        version: \d+

bb.rest.media_folder.post:
    path: /rest/{version}/media-folder
    methods: [POST]
    defaults:
        _action: postAction
        _controller: BackBee\Rest\Controller\MediaFolderController
    requirements:
        version: \d+

bb.rest.media_folder.put:
    path: /rest/{version}/media-folder/{uid}
    methods: [PUT]
    defaults:
        _action: putAction
        _controller: BackBee\Rest\Controller\MediaFolderController
    requirements:
        version: \d+

bb.rest.media_folder.delete:
    path: /rest/{version}/media-folder/{uid}
    methods: [DELETE]
    defaults:
        _action: deleteAction
        _controller: BackBee\Rest\Controller\MediaFolderController
    requirements:
        version: \d+

bb.rest.media_folder.get_ancestors:
    path: /rest/{version}/media-folder/{uid}/ancestors
    methods: [GET]
    defaults:
        _action: getAncestorsAction
        _controller: BackBee\Rest\Controller\MediaFolderController
    requirements:
        version: \d+

bb.rest.media_folder.get_permissions:
    path: /rest/{version}/media-folder/{group}/permissions
    methods: [GET]
    defaults:
        _action: getPermissionsAction
        _controller: BackBee\Rest\Controller\MediaFolderController
    requirements:
        version: \d+
        group: \d+

# Media
bb.media.get_collection:
    path: /rest/{version}/media
    methods: [GET]
    defaults:
        _action: getCollectionAction
        _controller: BackBee\Rest\Controller\MediaController
    requirements:
        version: \d+

bb.media.post:
  path: /rest/{version}/media
  methods: [POST]
  defaults:
    _action: postAction
    _controller: BackBee\Rest\Controller\MediaController

bb.media.put:
  path: /rest/{version}/media/{id}
  methods: [PUT]
  defaults:
    _action: putAction
    _controller: BackBee\Rest\Controller\MediaController

bb.media.delete:
  path: /rest/{version}/media/{id}
  methods: [DELETE]
  defaults:
    _action: deleteAction
    _controller: BackBee\Rest\Controller\MediaController

bb.media.list:
  path: /rest/{version}/medialist
  methods: [GET]
  defaults:
    _action: medialistAction
    _controller: BackBee\Rest\Controller\MediaController

bb.keyword.get_collection:
  path: /rest/{version}/keyword
  methods: [GET]
  defaults:
    _action: getCollectionAction
    _controller: BackBee\Rest\Controller\KeywordController

bb.keyword.get:
  path: /rest/{version}/keyword/{uid}
  methods: [GET]
  defaults:
    _action: getAction
    _controller: BackBee\Rest\Controller\KeywordController
  requirements:
    version: \d+
    uid: \w{32}

bb.keyword.post:
  path: /rest/{version}/keyword
  methods: [POST]
  defaults:
    _action: postAction
    _controller: BackBee\Rest\Controller\KeywordController

bb.keyword.put:
  path: /rest/{version}/keyword/{uid}
  methods: [PUT]
  defaults:
    _action: putAction
    _controller: BackBee\Rest\Controller\KeywordController

bb.keyword.delete:
  path: /rest/{version}/keyword/{uid}
  methods: [DELETE]
  defaults:
    _action: deleteAction
    _controller: BackBee\Rest\Controller\KeywordController

bb.rest.keyword.patch:
    path: /rest/{version}/keyword/{uid}
    methods: [PATCH]
    defaults:
        _action: patchAction
        _controller: BackBee\Rest\Controller\KeywordController
    requirements:
        version: \d+

bb.rest.workflow.get_permissions:
    path: /rest/{version}/workflow/{group}/permissions
    methods: [GET]
    defaults:
        _action: getPermissionsAction
        _controller: BackBee\Rest\Controller\WorkflowController
    requirements:
        version: \d+
        group: \d+

# API Rest Revision
bb.rest.revision.get:
    path: /rest/{version}/revision/{uid}
    methods: [GET]
    defaults:
        _action: getAction
        _controller: BackBee\Rest\Controller\RevisionController
    requirements:
        version: \d+

bb.rest.revision.get_collection_by_content:
    path: /rest/{version}/revision/{type}/{uid}
    methods: [GET]
    defaults:
        _action: getCollectionByContentAction
        _controller: BackBee\Rest\Controller\RevisionController
    requirements:
        version: \d+
        uid: \w{32}
        type: "[a-zA-Z_\/]+"

# BackBee rss
bb.rss:
    path: /rss/{uri}
    defaults:
        _action: rssAction
        uri:     _root_
    requirements:
        uri: .+

# Default route
default:
    path: /{uri}
    defaults:
        _action: defaultAction
        uri:     _root_
    requirements:
        uri: .+